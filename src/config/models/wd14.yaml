# Metadata
name: "WD14 Tagger"
id: "wd14"
wrapper_path: "src.wrappers.wd14.WD14Wrapper"
tags: true
natural_language: false
model_path: "SmilingWolf/wd-v1-4-convnextv2-tagger-v2"
description: "Waifu Diffusion, an anime-focused image tagging model. Outputs comma-separated tags using ONNX runtime.<br>Automatically resizes to 448x448px. Uses system RAM (not GPU VRAM). Scales proportionally for higher RAM values. Supports NSFW."
media_type:
  - "Image"
caption_speed: 16
licence: "Apache 2.0"
licence-url: "https://choosealicense.com/licenses/apache-2.0/"

# ONNX runtime uses system RAM instead of GPU VRAM
uses_system_ram: true

# Supported features
features:
  - model_version
  - threshold

# Model versions
model_versions:
  "ViT v3": "SmilingWolf/wd-vit-tagger-v3"
  "SwinV2 v3": "SmilingWolf/wd-swinv2-tagger-v3"
  "ConvNext v3": "SmilingWolf/wd-convnext-tagger-v3"
  "ViT Large v3": "SmilingWolf/wd-vit-large-tagger-v3"
  "EVA02 Large v3": "SmilingWolf/wd-eva02-large-tagger-v3"

# Defaults
defaults:
  model_version: "ViT v3"
  threshold: 0.35

# ONNX uses system RAM, not VRAM. Attention has O(batchÂ²) memory scaling.
vram_table:
  8: 16
  16: 32
  32: 64
  64: 128
  128: 192
  192: 256

# Feature layout
feature_rows:
  - [threshold]
